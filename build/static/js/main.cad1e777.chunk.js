(this["webpackJsonpreact-chat-app"]=this["webpackJsonpreact-chat-app"]||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var c=n(5),i=n(76),r=n.n(i),a=n(18),o=(n(89),n(39));n(101),n(91),n(102);o.a.apps.length?o.a.app():o.a.initializeApp({apiKey:"AIzaSyBByBUddjoqRf5mwMP-o4Ueg5jG7RMd9GU",authDomain:"react-chat-app-ce948.firebaseapp.com",projectId:"react-chat-app-ce948",storageBucket:"react-chat-app-ce948.appspot.com",messagingSenderId:"911721171669",appId:"1:911721171669:web:abe372a4edd0d468cc705c",measurementId:"G-07221R6KQR"});var s=o.a.firestore(),d=o.a.auth(),l=(o.a.firestore(),o.a.firestore(),o.a,n(60)),j=n(120),u=n(121),p=n(79),h=(n(96),n(15)),b=function(e){var t=e.scroll,n=Object(c.useState)(""),i=Object(a.a)(n,2),r=i[0],b=i[1],f=Object(c.useState)(!1),x=Object(a.a)(f,2),m=x[0],O=x[1],g=Object(l.b)();return Object(h.jsx)("div",{children:Object(h.jsx)("form",{onSubmit:function(e){e.preventDefault();var n=d.currentUser,c=n.uid,i=n.photoURL,a=e.target[0].files[0];a&&function(e){var n=Object(l.c)(g,e.name),r=Object(l.d)(n,e);r.on("state_changed",(function(e){}),(function(e){}),(function(){Object(l.a)(r.snapshot.ref).then((function(e){s.collection("messages").add({photoURL:i,downloadURL:e,uid:c,createdAt:o.a.firestore.FieldValue.serverTimestamp()}),b(""),t.current.scrollIntoView({behavior:"smooth"})}))}))}(a),0!==r.trim().length&&(s.collection("messages").add({text:r,photoURL:i,uid:c,createdAt:o.a.firestore.FieldValue.serverTimestamp()}),b(""),t.current.scrollIntoView({behavior:"smooth"}))},children:Object(h.jsxs)("div",{className:"sendMsg",children:[Object(h.jsx)("input",{type:"file"}),Object(h.jsx)(j.a,{className:"button",onClick:function(){return O(!m)},children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(h.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),Object(h.jsx)(u.a,{style:{width:"78%",fontSize:"15px",fontWeight:"550",marginLeft:"5px",marginBottom:"-3px"},placeholder:"Message...",type:"text",value:r,onChange:function(e){return b(e.target.value)}}),Object(h.jsx)(j.a,{style:{width:"18%",fontSize:"15px",fontWeight:"550",margin:"4px 5% -13px 5%",maxWidth:"200px"},type:"submit",children:"Send"}),m&&Object(h.jsx)("div",{children:Object(h.jsx)(p.a,{onSelect:function(e){var t=e.unified.split("-"),n=[];t.forEach((function(e){return n.push("0x"+e)}));var c=String.fromCodePoint.apply(String,n);b(r+c)}})})]})})})},f=function(){return Object(h.jsx)("div",{style:{display:"flex",justifyContent:"center",position:"fixed",width:"100%",backgroundColor:"#FAFAFA",top:0,borderBottom:"solid 1px lightgray",zIndex:"10"},children:Object(h.jsx)(j.a,{onClick:function(){return d.signOut()},children:"Sign Out"})})},x=function(){var e=Object(c.useRef)(),t=Object(c.useState)([]),n=Object(a.a)(t,2),i=n[0],r=n[1];return Object(c.useEffect)((function(){s.collection("messages").orderBy("createdAt").limit(50).onSnapshot((function(e){r(e.docs.map((function(e){return e.data()})))}))}),[]),Object(h.jsxs)("div",{children:[Object(h.jsx)(f,{}),Object(h.jsx)("div",{className:"msgs",children:i.map((function(e){var t=e.id,n=e.text,c=e.photoURL,i=e.uid,r=e.downloadURL;return Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"msg ".concat(i===d.currentUser.uid?"sent":"received"),children:[Object(h.jsx)("img",{src:c,alt:""}),r?Object(h.jsx)("img",{src:r,alt:""}):Object(h.jsx)("p",{children:n})]},t)})}))}),Object(h.jsx)(b,{scroll:e}),Object(h.jsx)("div",{ref:e})]})},m=function(){return Object(h.jsx)("div",{style:{display:"flex",justifyContent:"center",height:"100vh",alignItems:"center"},children:Object(h.jsx)(j.a,{style:{padding:"30px",fontSize:"20px",borderRadius:"0",fontWeight:"600"},onClick:function(){var e=new o.a.auth.GoogleAuthProvider;d.signInWithPopup(e)},children:"Sign In With Google"})})},O=n(78);var g=function(){var e=Object(O.a)(d),t=Object(a.a)(e,1)[0];return Object(h.jsx)(h.Fragment,{children:t?Object(h.jsx)(x,{}):Object(h.jsx)(m,{})})};r.a.render(Object(h.jsx)(g,{}),document.getElementById("root"))},89:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.cad1e777.chunk.js.map